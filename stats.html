<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>User Statistics</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(135deg,#f0f9ff,#cbebff);
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
    transition: background 0.6s ease, color 0.6s ease;
    overflow-x: hidden;
  }
  .header {
    background-color: #18bc9c;
    color: white;
    width: 100%;
    padding: 20px 0;
    text-align: center;
    box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    transition: background-color 0.6s ease;
  }
  .stats-container {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 30px;
    gap: 20px;
    width: 90%;
    max-width: 800px;
  }
  .stat-card {
    background: white;
    border-radius: 12px;
    padding: 20px;
    flex: 1 1 200px;
    text-align: center;
    box-shadow: 0 6px 15px rgba(0,0,0,0.15);
    border-left: 5px solid #18bc9c;
    transition: background 0.6s ease, border-color 0.6s ease;
  }
  .stat-card h2 {
    font-size: 1.8rem;
    margin: 0;
    color: #18bc9c;
    word-break: break-word;
    transition: color 0.6s ease;
  }
  .stat-card p {
    margin: 10px 0 0 0;
    font-size: 1rem;
    color: #2c3e50;
    transition: color 0.6s ease;
  }

  #theme-btn {
    position: fixed;
    top: 20px;
    right: 20px;
    background: #18bc9c;
    color: white;
    border: none;
    padding: 10px 16px;
    border-radius: 12px;
    cursor: pointer;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
  }
  #theme-btn:hover {
    background: #149f85;
    transform: translateY(-2px);
  }

  .theme-modal {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: white;
    padding: 20px 30px;
    border-radius: 14px;
    box-shadow: 0 6px 20px rgba(0,0,0,0.3);
    text-align: center;
    z-index: 1000;
  }
  .theme-modal.hidden { display: none; }
  .theme-options button {
    margin: 8px;
    padding: 10px 16px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    font-size: 1rem;
    transition: transform 0.2s;
  }
  .theme-options button:hover {
    transform: scale(1.05);
  }

  /* Locked theme */
  .locked {
    opacity: 0.4;
    cursor: not-allowed;
    position: relative;
  }
  .locked::after {
    content: attr(data-locked-text);
    position: absolute;
    bottom: -18px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.8rem;
    color: red;
  }

  .space-stars {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: transparent url("https://www.transparenttextures.com/patterns/stardust.png") repeat;
    opacity: 0.3;
    z-index: -1;
    pointer-events: none;
    display: none;
  }
</style>
</head>
<body>
<div class="header"><h1>User Statistics</h1></div>

<button id="theme-btn">ðŸŽ¨ Themes</button>

<div id="theme-selector" class="theme-modal hidden">
  <h3>Choose a Theme</h3>
  <div class="theme-options">
    <button data-theme="purple">ðŸ’œ Purple</button>
    <button data-theme="water">ðŸŒŠ Water</button>
    <button data-theme="volcanic">ðŸŒ‹ Volcanic</button>
    <button data-theme="space">ðŸŒŒ Space</button>
    <button data-theme="gold">ðŸ¥‡ Gold</button>
    <button data-theme="dark">ðŸŒ‘ Dark</button>
  </div>
</div>

<div class="stats-container">
  <div class="stat-card">
    <h2 id="displayName">Loading...</h2>
    <p>Display Name</p>
  </div>
  <div class="stat-card">
    <h2 id="email">Loading...</h2>
    <p>Email</p>
  </div>
  <div class="stat-card">
    <h2 id="lastLogin">Never</h2>
    <p>Last Login Date</p>
  </div>
  <div class="stat-card">
    <h2 id="quizCompletion">0</h2>
    <p>Quizzes Completed</p>
  </div>
</div>

<div class="space-stars" id="space-stars"></div>

<script>
function loadStats() {
  const displayName = localStorage.getItem("username") || "Unknown";
  const email = localStorage.getItem("email") || "Unknown";
  const lastLoginDate = localStorage.getItem("lastLoginDate") || "Never";
  const quizCompletion = Number(localStorage.getItem("QuizCompletion") || 0);

  document.getElementById("displayName").textContent = displayName;
  document.getElementById("email").textContent = email;
  document.getElementById("lastLogin").textContent = new Date(lastLoginDate).toLocaleString() || "Never";
  document.getElementById("quizCompletion").textContent = quizCompletion;
  return quizCompletion;
}

// Theme system
const themeBtn = document.getElementById("theme-btn");
const modal = document.getElementById("theme-selector");
const themeButtons = document.querySelectorAll(".theme-options button");
const starBg = document.getElementById("space-stars");

themeBtn.addEventListener("click", () => modal.classList.toggle("hidden"));

// Quiz unlock requirements
const unlocks = {
  purple: 1,
  water: 2,
  volcanic: 4,
  space: 6,
  gold: 8,
  dark: 12
};

const themes = {
  purple: { background: "linear-gradient(135deg, #3a0ca3, #7209b7)", header: "#9d4edd", card:"#f3e8ff", text:"#3c096c", border:"#7209b7" },
  water: { background: "linear-gradient(135deg, #a2d9ff, #0077be)", header:"#0099cc", card:"#e0f7ff", text:"#004466", border:"#0099cc" },
  volcanic: { background:"linear-gradient(135deg, #3b0a0a, #ff4500)", header:"#ff6b3d", card:"#fff0e0", text:"#8b0000", border:"#ff4500" },
  space: { background:"radial-gradient(circle at top left, #000014, #050a30, #000014)", header:"#66fcf1", card:"rgba(25,25,45,0.85)", text:"#45a29e", border:"#66fcf1" },
  gold: { background:"linear-gradient(135deg, #fff8dc, #ffd700)", header:"#b8860b", card:"#fffaf0", text:"#b8860b", border:"#daa520" },
  dark: { background:"linear-gradient(135deg,#121212,#1e1e1e,#2c2c2c)", header:"#222", card:"#1a1a1a", text:"#f5f5f5", border:"#444" }
};

function applyTheme(name) {
  const t = themes[name];
  if(!t) return;
  document.body.style.background = t.background;
  document.querySelector(".header").style.backgroundColor = t.header;
  document.querySelectorAll(".stat-card").forEach(card => {
    card.style.background = t.card;
    card.style.borderColor = t.border;
  });
  document.querySelectorAll(".stat-card h2, .stat-card p").forEach(el => el.style.color = t.text);

  starBg.style.display = name === "space" ? "block" : "none";
  localStorage.setItem("selectedTheme", name);
  modal.classList.add("hidden");
}

function updateThemeButtons(quizCompletion){
  themeButtons.forEach(btn => {
    const theme = btn.getAttribute("data-theme");
    const required = unlocks[theme];
    if(quizCompletion >= required){
      btn.classList.remove("locked");
      btn.removeAttribute("disabled");
      btn.removeAttribute("data-locked-text");
    } else {
      btn.classList.add("locked");
      btn.setAttribute("disabled", "true");
      btn.setAttribute("data-locked-text", `${required - quizCompletion} more quiz${required - quizCompletion > 1 ? 'zes' : ''} needed`);
    }
  });
}

// Theme selection click
themeButtons.forEach(btn => {
  btn.addEventListener("click", () => {
    if(btn.disabled) return;
    const selected = btn.getAttribute("data-theme");
    applyTheme(selected);
  });
});

window.addEventListener("DOMContentLoaded", () => {
  const quizCompletion = loadStats();
  updateThemeButtons(quizCompletion);
  const saved = localStorage.getItem("selectedTheme");
  if(saved) applyTheme(saved);
});
</script>
</body>
</html>
